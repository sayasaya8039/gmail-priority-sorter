import{c as E,j as s,r as l}from"./client-C3Ze0Hgb.js";import{g as w,u as C}from"./storage-CS1t7rav.js";const h={critical:{label:"ç·Šæ€¥",color:"#DC2626",bgColor:"#FEE2E2"},high:{label:"é«˜",color:"#EA580C",bgColor:"#FFEDD5"},medium:{label:"ä¸­",color:"#2563EB",bgColor:"#DBEAFE"},low:{label:"ä½",color:"#6B7280",bgColor:"#F3F4F6"}},m={urgent:{label:"ç·Šæ€¥",icon:"ğŸš¨"},important:{label:"é‡è¦",icon:"â­"},meeting:{label:"ä¼šè­°",icon:"ğŸ“…"},action:{label:"è¦å¯¾å¿œ",icon:"ğŸ“‹"},fyi:{label:"å‚è€ƒ",icon:"ğŸ“"},newsletter:{label:"ãƒ‹ãƒ¥ãƒ¼ã‚¹",icon:"ğŸ“°"},promotion:{label:"ãƒ—ãƒ­ãƒ¢",icon:"ğŸ·ï¸"},social:{label:"SNS",icon:"ğŸ’¬"},other:{label:"ãã®ä»–",icon:"ğŸ“§"}},F=()=>{const[c,o]=l.useState(null),[r,g]=l.useState([]),[j,u]=l.useState(!0),[n,p]=l.useState({critical:0,high:0,medium:0,low:0});l.useEffect(()=>(N(),chrome.runtime.onMessage.addListener(d),()=>{chrome.runtime.onMessage.removeListener(d)}),[]);const d=l.useCallback(e=>{e.type==="EMAILS_CLASSIFIED"&&e.emails&&(g(e.emails),b(e.emails))},[]),N=async()=>{try{const e=await w();o(e)}catch(e){console.error("è¨­å®šã®èª­ã¿è¾¼ã¿ã«å¤±æ•—:",e)}finally{u(!1)}},b=e=>{const t={critical:0,high:0,medium:0,low:0};e.forEach(a=>{a.priority in t&&t[a.priority]++}),p(t)},i=async e=>{if(!c)return;const t=!c[e],a={...c,[e]:t};o(a),await C({[e]:t})},y=()=>{chrome.tabs.query({active:!0,currentWindow:!0},e=>{e[0]?.id&&chrome.tabs.sendMessage(e[0].id,{type:"REFRESH"})})},S=()=>{chrome.runtime.openOptionsPage()};if(j)return s.jsx("div",{className:"sidepanel-container",children:s.jsx("div",{className:"loading",children:"èª­ã¿è¾¼ã¿ä¸­..."})});const v=chrome.runtime.getManifest().version;return s.jsxs("div",{className:"sidepanel-container",children:[s.jsxs("header",{className:"sidepanel-header",children:[s.jsxs("div",{className:"logo",children:[s.jsx("span",{className:"logo-icon",children:"ğŸ“§"}),s.jsx("h1",{children:"Priority Sorter"})]}),s.jsxs("span",{className:"version",children:["v",v]})]}),s.jsxs("section",{className:"stats-section",children:[s.jsx("h2",{children:"ğŸ“Š ãƒ¡ãƒ¼ãƒ«çµ±è¨ˆ"}),s.jsxs("div",{className:"stats-grid",children:[s.jsxs("div",{className:"stat-card critical",children:[s.jsx("span",{className:"stat-count",children:n.critical}),s.jsx("span",{className:"stat-label",children:"ç·Šæ€¥"})]}),s.jsxs("div",{className:"stat-card high",children:[s.jsx("span",{className:"stat-count",children:n.high}),s.jsx("span",{className:"stat-label",children:"é«˜"})]}),s.jsxs("div",{className:"stat-card medium",children:[s.jsx("span",{className:"stat-count",children:n.medium}),s.jsx("span",{className:"stat-label",children:"ä¸­"})]}),s.jsxs("div",{className:"stat-card low",children:[s.jsx("span",{className:"stat-count",children:n.low}),s.jsx("span",{className:"stat-label",children:"ä½"})]})]})]}),s.jsxs("section",{className:"settings-section",children:[s.jsx("h2",{children:"âš™ï¸ ã‚¯ã‚¤ãƒƒã‚¯è¨­å®š"}),s.jsxs("div",{className:"toggle-list",children:[s.jsxs("label",{className:"toggle-item",children:[s.jsx("span",{children:"æ‹¡å¼µæ©Ÿèƒ½ã‚’æœ‰åŠ¹åŒ–"}),s.jsx("input",{type:"checkbox",checked:c?.enabled??!0,onChange:()=>i("enabled")}),s.jsx("span",{className:"toggle-switch"})]}),s.jsxs("label",{className:"toggle-item",children:[s.jsx("span",{children:"ãƒãƒƒã‚¸è¡¨ç¤º"}),s.jsx("input",{type:"checkbox",checked:c?.showBadges??!0,onChange:()=>i("showBadges")}),s.jsx("span",{className:"toggle-switch"})]}),s.jsxs("label",{className:"toggle-item",children:[s.jsx("span",{children:"ã‚¹ã‚³ã‚¢è¡¨ç¤º"}),s.jsx("input",{type:"checkbox",checked:c?.showScores??!0,onChange:()=>i("showScores")}),s.jsx("span",{className:"toggle-switch"})]})]})]}),s.jsxs("section",{className:"actions-section",children:[s.jsx("button",{className:"btn btn-primary",onClick:y,children:"ğŸ”„ å†åˆ†é¡"}),s.jsx("button",{className:"btn btn-secondary",onClick:S,children:"âš™ï¸ è©³ç´°è¨­å®š"})]}),r.length>0&&s.jsxs("section",{className:"emails-section",children:[s.jsx("h2",{children:"ğŸ“¬ åˆ†é¡æ¸ˆã¿ãƒ¡ãƒ¼ãƒ«"}),s.jsx("ul",{className:"email-list",children:r.slice(0,20).map((e,t)=>{const a=h[e.priority]||h.medium,f=m[e.category]||m.other;return s.jsxs("li",{className:"email-item",children:[s.jsx("div",{className:"email-priority",style:{background:a.bgColor,color:a.color},children:a.label}),s.jsxs("div",{className:"email-content",children:[s.jsxs("div",{className:"email-sender",children:[f.icon," ",e.sender]}),s.jsx("div",{className:"email-subject",children:e.subject||"(ä»¶åãªã—)"})]}),s.jsx("div",{className:"email-score",style:{background:a.color},children:e.urgencyScore})]},t)})})]}),s.jsx("footer",{className:"sidepanel-footer",children:s.jsx("p",{children:"Gmailã‚’é–‹ãã¨è‡ªå‹•ã§åˆ†é¡ã•ã‚Œã¾ã™"})})]})},x=document.getElementById("root");x&&E.createRoot(x).render(s.jsx(F,{}));
