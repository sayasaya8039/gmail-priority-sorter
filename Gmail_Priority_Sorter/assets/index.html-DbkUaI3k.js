import{c as b,j as s,r as n}from"./client-C3Ze0Hgb.js";import{g as v,u as S}from"./storage-CS1t7rav.js";const f=()=>{const[e,l]=n.useState(null),[r,d]=n.useState(!0),[h,c]=n.useState(!1);n.useEffect(()=>{m()},[]);const m=async()=>{try{const a=await v();l(a)}catch(a){console.error("è¨­å®šã®èª­ã¿è¾¼ã¿ã«å¤±æ•—:",a)}finally{d(!1)}},t=async a=>{if(!e)return;const i=!e[a],u={...e,[a]:i};l(u);try{await S({[a]:i}),p()}catch(N){console.error("è¨­å®šã®ä¿å­˜ã«å¤±æ•—:",N)}},p=()=>{c(!0),setTimeout(()=>c(!1),1500)},x=()=>{chrome.tabs.query({active:!0,currentWindow:!0},a=>{a[0]?.id&&chrome.tabs.sendMessage(a[0].id,{type:"REFRESH"})})},g=()=>{chrome.runtime.openOptionsPage()};if(r)return s.jsx("div",{className:"popup-container",children:s.jsx("div",{className:"loading",children:"èª­ã¿è¾¼ã¿ä¸­..."})});if(!e)return s.jsx("div",{className:"popup-container",children:s.jsx("div",{className:"error",children:"è¨­å®šã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ"})});const j=chrome.runtime.getManifest().version;return s.jsxs("div",{className:"popup-container",children:[s.jsxs("header",{className:"popup-header",children:[s.jsxs("div",{className:"logo",children:[s.jsx("span",{className:"logo-icon",children:"ğŸ“§"}),s.jsx("span",{className:"logo-text",children:"Gmail Priority Sorter"})]}),s.jsxs("span",{className:"version",children:["v",j]})]}),s.jsxs("main",{className:"popup-content",children:[s.jsxs("div",{className:"toggle-group",children:[s.jsx("div",{className:"toggle-item",children:s.jsxs("label",{children:[s.jsx("span",{className:"toggle-label",children:"æ‹¡å¼µæ©Ÿèƒ½ã‚’æœ‰åŠ¹åŒ–"}),s.jsx("input",{type:"checkbox",checked:e.enabled,onChange:()=>t("enabled")}),s.jsx("span",{className:"toggle-switch"})]})}),s.jsx("div",{className:"toggle-item",children:s.jsxs("label",{children:[s.jsx("span",{className:"toggle-label",children:"è‡ªå‹•ã‚½ãƒ¼ãƒˆ"}),s.jsx("input",{type:"checkbox",checked:e.autoSort,onChange:()=>t("autoSort"),disabled:!e.enabled}),s.jsx("span",{className:"toggle-switch"})]})}),s.jsx("div",{className:"toggle-item",children:s.jsxs("label",{children:[s.jsx("span",{className:"toggle-label",children:"ã‚¹ã‚³ã‚¢è¡¨ç¤º"}),s.jsx("input",{type:"checkbox",checked:e.showScores,onChange:()=>t("showScores"),disabled:!e.enabled}),s.jsx("span",{className:"toggle-switch"})]})}),s.jsx("div",{className:"toggle-item",children:s.jsxs("label",{children:[s.jsx("span",{className:"toggle-label",children:"ã‚«ãƒ†ã‚´ãƒªãƒãƒƒã‚¸"}),s.jsx("input",{type:"checkbox",checked:e.showBadges,onChange:()=>t("showBadges"),disabled:!e.enabled}),s.jsx("span",{className:"toggle-switch"})]})})]}),s.jsxs("div",{className:"stats",children:[s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"â­"}),s.jsx("span",{className:"stat-label",children:"VIP"}),s.jsxs("span",{className:"stat-value",children:[e.vipList.length,"äºº"]})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"ğŸš«"}),s.jsx("span",{className:"stat-label",children:"ç„¡è¦–"}),s.jsxs("span",{className:"stat-value",children:[e.ignoreList.length,"ä»¶"]})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"ğŸ“‹"}),s.jsx("span",{className:"stat-label",children:"ãƒ«ãƒ¼ãƒ«"}),s.jsxs("span",{className:"stat-value",children:[e.customRules.length,"ä»¶"]})]})]}),s.jsxs("div",{className:"actions",children:[s.jsx("button",{className:"btn btn-primary",onClick:x,children:"ğŸ”„ å†åˆ†é¡"}),s.jsx("button",{className:"btn btn-secondary",onClick:g,children:"âš™ï¸ è©³ç´°è¨­å®š"})]})]}),h&&s.jsx("div",{className:"toast",children:"âœ“ ä¿å­˜ã—ã¾ã—ãŸ"})]})},o=document.getElementById("root");o&&b.createRoot(o).render(s.jsx(f,{}));
