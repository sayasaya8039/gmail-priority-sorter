# Gmail Priority Sorter - メール優先度自動分類

![Version](https://img.shields.io/badge/version-1.1.0-blue.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)
![Chrome](https://img.shields.io/badge/Chrome-Extension-orange.svg)

AIがGmailの受信トレイを分析し、重要なメールを上位に並べ替え、緊急度スコアを自動付与するChrome拡張機能です。

## 機能

### メール自動分類
- **緊急度スコア**: 各メールに0-100のスコアを自動付与
- **優先度ラベル**: 緊急/高/中/低の4段階で分類
- **カテゴリ分け**: 緊急、重要、会議、要対応、参考、ニュースレター、プロモーション、SNS、その他

### 視覚的表示
- カテゴリアイコンと優先度バッジをメール一覧に表示
- 緊急度スコアをメール行の右側に表示
- 高優先度メールには左側にカラーバーを表示

### サイドパネル
- **メール統計**: 優先度別の件数をリアルタイム表示
- **クイック設定**: 有効化/バッジ/スコア表示のON/OFF
- **VIPリスト管理**: 常に高優先度にする送信者を登録
- **無視リスト管理**: 常に低優先度にする送信者を登録
- **カスタムルール**: ルールの表示・ON/OFF・削除

### その他
- Gmailタブ切り替え時も自動でアイコン再適用
- ダークモード対応
- 詳細設定ページでカスタムルールを追加可能

## インストール方法

### 開発版のインストール

1. このリポジトリをクローン
```bash
git clone https://github.com/sayasaya8039/gmail-priority-sorter.git
cd gmail-priority-sorter
```

2. 依存関係をインストール
```bash
npm install
```

3. ビルド
```bash
npm run build
```

4. Chromeで拡張機能を読み込み
   - `chrome://extensions/` を開く
   - 「デベロッパーモード」をオン
   - 「パッケージ化されていない拡張機能を読み込む」をクリック
   - `Gmail_Priority_Sorter` フォルダを選択

## 使い方

1. **Gmailを開く**: https://mail.google.com にアクセスすると自動的にメールが分類されます
2. **サイドパネルを開く**: 拡張機能アイコンをクリックするとサイドパネルが開きます
3. **統計確認**: サイドパネルで優先度別のメール件数を確認できます
4. **設定変更**: サイドパネルまたは詳細設定ページでカスタマイズ

### サイドパネルの使い方

| タブ | 機能 |
|------|------|
| 統計 | メール統計、クイック設定、分類済みメール一覧 |
| VIP/無視 | VIPリストと無視リストの追加・削除 |
| ルール | カスタムルールのON/OFF・削除 |

## 分類ルール

### 優先度レベル

| レベル | スコア範囲 | 説明 |
|--------|-----------|------|
| 緊急 | 80-100 | 即座に対応が必要 |
| 高 | 60-79 | 早めの対応が望ましい |
| 中 | 40-59 | 通常の優先度 |
| 低 | 0-39 | 時間のある時に確認 |

### カテゴリ

| カテゴリ | アイコン | 検出条件 |
|---------|---------|----------|
| 緊急 | 🚨 | 「緊急」「至急」「URGENT」などのキーワード |
| 重要 | ⭐ | 重要な内容を含むメール |
| 会議 | 📅 | 「会議」「ミーティング」「Zoom」などのキーワード |
| 要対応 | 📋 | 「確認してください」「返信」などのキーワード |
| 参考 | 📝 | 情報共有目的のメール |
| ニュース | 📰 | ニュースレター、配信メール |
| プロモ | 🏷️ | セール、キャンペーン情報 |
| SNS | 💬 | ソーシャルメディア通知 |
| その他 | 📧 | 上記に該当しないメール |

### スコア計算要素

- キーワードマッチ（カテゴリ別）
- 未読状態: +10点
- スター付き: +15点
- VIPリスト送信者: +30点
- 無視リスト送信者: -40点
- カスタムルール: 設定による

## 開発

### 開発サーバーの起動

```bash
npm run dev
```

### プロダクションビルド

```bash
npm run build
```

### 型チェック

```bash
npm run typecheck
```

### プロジェクト構成

```
src/
├── background/      # Service Worker
├── content/         # コンテンツスクリプト（Gmail DOM操作）
├── sidepanel/       # サイドパネルUI
├── options/         # オプションページ
├── types/           # 型定義
└── utils/           # ユーティリティ
    ├── classifier.ts   # 分類エンジン
    └── storage.ts      # Chrome Storage操作
```

## 技術スタック

- **フレームワーク**: React 19
- **言語**: TypeScript
- **ビルドツール**: Vite + CRXJS
- **マニフェスト**: Chrome Extension Manifest V3
- **Chrome API**: Side Panel API, Storage API

## プライバシーについて

この拡張機能は：
- メールの内容をサーバーに送信しません
- すべての処理はローカルで行われます
- 設定はChromeの同期ストレージに保存されます
- 必要最小限の権限のみを要求します

## 必要な権限

| 権限 | 用途 |
|------|------|
| storage | 設定の保存 |
| activeTab | アクティブタブの情報取得 |
| sidePanel | サイドパネル機能 |
| tabs | タブ情報の取得 |
| host_permissions (mail.google.com) | Gmailへのアクセス |

## 注意事項

- この拡張機能はGmailのDOM構造に依存しているため、Gmailの大規模なUI変更により動作しなくなる可能性があります
- 現在、日本語キーワードを中心に分類ルールが設定されています

## ライセンス

MIT License

## 作者

sayasaya8039

---

お問い合わせやバグ報告は[Issues](https://github.com/sayasaya8039/gmail-priority-sorter/issues)からお願いします。
